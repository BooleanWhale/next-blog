{"ast":null,"code":"import fs from 'fs';\nimport { join } from 'path';\nimport matter from 'gray-matter';\nvar postsDirectory = join(process.cwd(), 'posts');\nexport function getPostSlugs() {\n  return fs.readdirSync(postsDirectory);\n}\nexport function getPostBySlug(slug) {\n  var fields = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var realSlug = slug.replace(/\\.md$/, '');\n  var fullPath = join(postsDirectory, \"\".concat(realSlug, \".md\"));\n  var fileContents = fs.readFileSync(fullPath, 'utf8');\n\n  var _matter = matter(fileContents),\n      data = _matter.data,\n      content = _matter.content;\n\n  var items = {}; // Ensure only the minimal needed data is exposed\n\n  fields.forEach(function (field) {\n    if (field === 'slug') {\n      items[field] = realSlug;\n    }\n\n    if (field === 'content') {\n      items[field] = content;\n    }\n\n    if (data[field]) {\n      items[field] = data[field];\n    }\n  });\n  return items;\n}\nexport function getAllPosts() {\n  var fields = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var slugs = getPostSlugs();\n  var posts = slugs.map(function (slug) {\n    return getPostBySlug(slug, fields);\n  }) // sort posts by date in descending order\n  .sort(function (post1, post2) {\n    return post1.date > post2.date ? '-1' : '1';\n  });\n  return posts;\n}","map":null,"metadata":{},"sourceType":"module"}